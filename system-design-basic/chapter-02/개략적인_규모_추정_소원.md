개략적인 규모 추정은 설계안이 요구사항(트래픽, 데이터 양 등)을 감당할 수 있는지 확인하기 위해, **보편적인 성능 수치를 바탕으로 계산하는 행위**

## 1. 기본 수치

### 2의 제곱수와 데이터 단위

데이터 규모를 빠르게 계산하기 위해 2의 제곱수와 그에 대응하는 단위 인지 필요

| **2의 거듭제곱** | **근사치** | **축약형** |
| --- | --- | --- |
| 2^10 | 1,000 (천) | 1 KB |
| 2^20 | 1,000,000 (백만) | 1 MB |
| 2^30 | 1,000,000,000 (십억) | 1 GB |
| 2^40 | 1,000,000,000,000 (일조) | 1 TB |
| 2^50 | 1,000,000,000,000,000 (천조) | 1 PB |

### 응답 지연(Latency) 값

아래 수치들은 시스템의 병목 구간을 파악하는 기준이 된다.

| **연산명** | **시간** | **비교** |
| --- | --- | --- |
| L1 캐시 참조 | 0.5 ns | 가장 빠름 |
| 분기 예측 오류 | 5 ns | 10초 |
| L2 캐시 참조 | 7 ns | L1보다 약 14배 느림 |
| 주(RAM) 메모리 참조 | 100 ns | L2보다 약 14배 느림 |
| 뮤텍스 락/언락 | 100 ns |  |
| Zippy로 1KB 압축 | 10 µs |  |
| 1 Gbps 네트워크로 2KB 전송 | 20 µs |  |
| 메모리에서 1MB 순차 읽기 | 250 µs |  |
| 같은 데이터 센터 내 왕복(RTT) | 500 µs |  |
| **디스크 탐색(Disk Seek)** | **10 ms** | **메모리보다 10만 배 느림** |
| 네트워크에서 1MB 순차 읽기 | 10 ms |  |
| 디스크에서 1MB 순차 읽기 | 30 ms |  |
| 대륙 간 왕복(RTT) | 150 ms | 물리적 거리의 한계 |
- **메모리는 빠르지만 디스크는 훨씬 느림.** 디스크 탐색은 최대한 지양.
- 공개 네트워크 전송 전에는 데이터를 **압축**하는 것이 유리.
- 데이터 센터 간 통신은 지연 시간이 크므로, 사용자와 가까운 곳에 서버 배치(CDN/Edge)필요.

---

## 2. 가용성 및 SLA

### 2.1. 주요 개념

- **고가용성:** 시스템이 장시간 동안 중단 없이 운영될 수 있는 능력.
- **SLA:** 서비스 제공자가 고객과 맺는 공식 계약. 가용성 수준 미달 시 보상 기준 등..
- **SLI vs SLO vs SLA:**
    - **SLI :** 실제 측정된 수치 (예: 현재 가용성 99.9%)
    - **SLO:** 내부적인 목표치 (예: 우리 팀은 99.95%를 유지하자)
    - **SLA:** 고객과의 법적 약속 (예: 99.9% 미달 시 환불)

**아키텍처와 SLA**

- Single AZ / Region → 낮은 SLA
- Multi AZ / Region → 높은 SLA

→ 인프라 구성을 잘할수록 더 높은 SLA 적용

**SLA 보상 적용 안 되는 경우**

- 고객 과실
- Free Tier / Preview
- 외부 네트워크 장애
- 일부 DDoS 상황

→ **고가용성 설계:** 단일 장애 지점(SPOF)을 없애기 위해 Multi-AZ, Multi-Region 구성 지항 필요

---

## 3. 실전 규모 추정 산식 (QPS & 저장소)

### 트래픽 추정 (QPS)

- **DAU (Daily Active Users):** 일일 능동 사용자 수
- **평균 QPS:** `(DAU * 사용자당 일일 요청 수) / 86,400`
- **최대(Peak) QPS:** `평균 QPS * 관습적 배수 (보통 2배 ~ 5배)`

### 저장소 규모 추정 (Storage)

1. 사용자당 하루에 업로드하는 데이터 크기 계산
2. 데이터 보관 기간 설정 (예: 5년)
3. 총 용량 = `사용자 수 * 평균 데이터 크기 * 보관 일수`
4. **복제(Replication)** 고려: 보통 3배의 저장 공간이 필요하다

---

## 4. 면접 대비

1. **근사치 활용**
2. **가정 명시**
3. **단위 기입:** 결과값에 QPS, PB, ms 등의 단위를 반드시 작성
4. **주요 평가 항목:**
    - **QPS:** 처리량(Throughput)
    - **저장소 요구량:** 데이터베이스 및 파일 서버 규모
    - **캐시 요구량:** 메모리에 올려둘 데이터 양
    - **서버 대수:** CPU/메모리 사양에 따른 필요 인스턴스 수

# 5. 성능 테스트

- **k6 / JMeter / Gatling:** 부하 테스트 및 Peak QPS 확인
- **P99 Latency:** 하위 1%의 사용자가 겪는 지연 시간까지 관리해야 한다
- **모니터링:** CPU, DB Connection, Error Rate 체크 필수
